<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mapa com Denúncias</title>
  <link 
    rel="stylesheet" 
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
    crossorigin="" 
  />
  <style>
    #map {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script 
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
    crossorigin=""
  ></script>

  <script>
    // Inicializa o mapa
    const map = L.map('map').setView([-25.450, -49.230], 17); // Exemplo: Curitiba

    // Adiciona camada base do OpenStreetMap
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // Função ao clicar no mapa
    function onMapClick(e) {
      const { lat, lng } = e.latlng;

      const popupContent = `
        <div style="
          width: 180px;
          background: #4B4B3E;
          border-radius: 16px;
          padding: 12px;
          text-align: center;
          color: white;
          font-family: Arial, sans-serif;
        ">
          <div style="margin-bottom: 10px; font-size: 14px;">
            O que deseja fazer?
          </div>
          <button onclick="alert('Abrir rotas para ${lat.toFixed(5)}, ${lng.toFixed(5)}')" style="
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 6px 12px;
            margin-bottom: 8px;
            width: 100%;
            font-weight: bold;
          ">ROTAS</button>
          <a href="denuncia.html?lat=${lat}&lng=${lng}" style="
            display: inline-block;
            background-color: #dc2626;
            color: white;
            text-decoration: none;
            border-radius: 12px;
            padding: 6px 0;
            width: 100%;
            font-weight: bold;
          ">DENUNCIAR</a>
        </div>
      `;

      L.marker([lat, lng])
        .addTo(map)
        .bindPopup(popupContent)
        .openPopup();
    }

    map.on('click', onMapClick);
  </script>
</body>
</html>
